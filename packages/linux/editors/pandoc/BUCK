load("//defs:package.bzl", "package")

# Pandoc is distributed as a pre-built binary due to Haskell compilation complexity
package(
    build_rule = "binary",
    name = "pandoc",
    version = "3.5",
    description = "Universal document converter supporting markdown, HTML, LaTeX, and more",
    homepage = "https://pandoc.org/",
    license = "GPL-2.0",
    install_script = """
cd $SRCS
mkdir -p "$OUT/usr/bin"
mkdir -p "$OUT/usr/share/man/man1"
cp bin/pandoc "$OUT/usr/bin/"
chmod 755 "$OUT/usr/bin/pandoc"
if [ -f share/man/man1/pandoc.1 ]; then
    cp share/man/man1/pandoc.1 "$OUT/usr/share/man/man1/"
fi
""",
    visibility = ["PUBLIC"],
)
