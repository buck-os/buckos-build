load("//defs:package.bzl", "package")

package(
    build_rule = "meson",
    name = "aravis",
    version = "0.8.30",
    use_configure = {
        "fast-heartbeat": ("--enable-fast-heartbeat", "--disable-fast-heartbeat"),
        "gstreamer": ("--enable-gstreamer", "--disable-gstreamer"),
        "introspection": ("--enable-introspection", "--disable-introspection"),
        "packet-socket": ("--enable-packet-socket", "--disable-packet-socket"),
        "usb": ("--enable-usb", "--disable-usb"),
        "viewer": ("--enable-viewer", "--disable-viewer"),
    },
    url = "https://github.com/AravisProject/aravis/releases/download/{version}/aravis-{version}.tar.xz",
    sha256 = "40380f06fa04524a7875bd456e5a5ea78b2c058fa84b5598bc6e0642fcef00b0",
    deps = [
        "//packages/linux/dev-libs/glib:glib",
        "//packages/linux/system/libs/libusb:libusb",
        "//packages/linux/system/libs/data/libxml2:libxml2",
        "//packages/linux/core/zlib:zlib",
    ],
    configure_args = [
        "-Dviewer=disabled",
        "-Dgst-plugin=disabled",
        "-Ddocumentation=disabled",
        "-Dintrospection=disabled",
        "-Dusb=enabled",
        "-Dpacket-socket=enabled",
    ],
)
