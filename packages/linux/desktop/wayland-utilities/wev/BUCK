load("//defs:package.bzl", "package")

load("//defs:eclasses.bzl", "inherit")

# wev is a simple Makefile-based project, not Meson
ebuild_package_rule(
    name = "wev",
    version = "1.0.0",
    description = "Wayland event viewer",
    homepage = "https://git.sr.ht/~sircmpwn/wev",
    license = "MIT",
    package_type = "make",
    src_configure = "",  # No configure step needed
    src_compile = """
make wev wev.1
""",
    src_install = """
mkdir -p "$DESTDIR/usr/bin"
mkdir -p "$DESTDIR/usr/share/man/man1"
install -m755 wev "$DESTDIR/usr/bin/wev"
install -m644 wev.1 "$DESTDIR/usr/share/man/man1/wev.1"
""",
    rdepend = [
        "//packages/linux/system/libs/utility/libffi:libffi",
        "//packages/linux/graphics/rendering/wayland:wayland",
        "//packages/linux/graphics/rendering/wayland-protocols:wayland-protocols",
    ],
    bdepend = [
        "//packages/linux/dev-tools/build-systems/pkg-config:pkg-config",
        "//packages/linux/dev-tools/build-systems/scdoc:scdoc",
    ],
    visibility = ["PUBLIC"],
)
